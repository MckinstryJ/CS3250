package edu.msudenver.cs.team_four.UserTests;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotEquals;

import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

import edu.msudenver.cs.team_four.User.*;

import java.util.*;

public class UserTest {
	
	static User tester;
	static User testerA;
	static User testerB;
	static UserController tester2;
	static UserService tester3;
	
	@BeforeClass
	public static void testSetup() {
		tester = new User("Alfred", "12345");
		testerA = new User("Bruce", "900689234");
		testerB = new User("Richard", "900548322");
		tester2 = new UserController();
		tester3 = new UserService();
	}
	
	
	@AfterClass
	public static void testCleanup() {
		tester = null;
		testerA = null;
		testerB = null;
		tester2 = null;
		tester3 = null;
	}
	//Tests for User Class
	@Test
	//Tests the username fetch method and is supposed to fail.
	public void userNameFail() {
		assertNotEquals("Result", testerA.getName());
	}
	@Test
	//Tests the username fetch method
	public void userNamePass() {
		testerA = new User("Bruce", "12345");
		assertEquals("Bruce", testerA.getName());
	}
	@Test
	//Tests the username change method
	public void changeUserName() {
		tester = new User("Bill", "12345");
		tester.setName("Frank");
		assertEquals("Frank",tester.getName());
	}
	@Test
	//tests the username change method and is supposed to fail
	public void changeUserNameFail() {
		tester = new User("Bill", "123555");
		tester.setName("Steve");
		assertNotEquals("Frank",tester.getName());
	}
	@Test
	//Testing fetch id
	public void idTest() {
		tester = new User("Bob", "1234456");
		assertEquals("1234456", tester.getId());
	}
	@Test
	//testing change id
	public void changeIdTest() {
		tester = new User("Bob", "111111");
		tester.setId("67890");
		assertEquals("67890", tester.getId());
	}
	//Service Tests
	@Test
	public void addUserTest() {
		/*
		 * The reason why you could only add three was because
		 * Nick had created a fixed array in UserService.
		 * I changed it to a dynamic array and now you can add
		 * as many as you want.
		 */
		tester3.addUser(tester);
		tester3.addUser(testerA);
		tester3.addUser(testerB);
	}
	/**
	 * I don't know what the updateUser is expected to achieve, but you needed
	 * to add a new User to tester3 before updating it.
	 */
	@Test	
	public void updateUserTest(){
		testerA = new User("ID1", "12345");
		tester3.addUser(testerA);
		tester3.updateUser("12345",testerA);
		assertEquals(testerA, tester3.getUser("12345"));
	}
	@Test(expected = AssertionError.class)
	/*
	 * Might have to adjust the UserService to throw a better error when
	 * an id isn't found.
	 */
	public void deleteUserTest(){
		tester3.deleteUser(tester);
		assertEquals(tester3, null);		
	}
	@Test
	//This test is returning the user's location instead of the user name.
	public void getUserTest() {
		tester = new User("Bruce", "900689234");
		tester3.addUser(tester);
		assertEquals("Bruce", tester3.getUserName("900689234"));
	}

}

